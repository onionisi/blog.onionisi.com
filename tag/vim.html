<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="utf-8">




    <meta name="author" content="Chong Yang">

    <title>onionisi - vim</title>

        <link rel="stylesheet" href="../theme/css/style.min.css?981d7269">

    <link rel="shortcut icon" href="../theme/img/favicon.ico" />
    <link rel="icon" sizes="16x16 32x32" href="../theme/img/favicon.ico">



</head>

<body>
    <header id="sitehead">
        <div class="sitehead">
            <span id="sitehead">
                <a href="..">onionisi</a>
            </span>
        </div>
            <div id="tagline">
                <strong>fprintf(post, "%s\n", daily_life)</strong>
            </div>
        <nav class="navbar">
                <a href="../category/blog.html">Blog</a>&nbsp;
                    <a href="../pages/about.html">About</a>&nbsp;
        </nav>
    </header><!-- /header-siteheader -->

                <aside id="featured">
                    <article>
                        <h1 class="entry-title"><a href="../taglist_failed.html">Mac vim taglist failed</a></h1>
                        <p>vim的常规插件taglist报错了，妈蛋，没有你我怎么看C code</p>
<div class="highlight"><pre><span class="n">Taglist</span><span class="o">:</span> <span class="n">Failed</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">tags</span> <span class="k">for</span> <span class="sr">/Users/chong/code/redis-3.0-annotated/src/</span><span class="n">ae</span><span class="o">.</span><span class="na">c</span>
<span class="sr">/Library/Developer/CommandLineTools/usr/bin/</span><span class="n">ctags</span><span class="o">:</span> <span class="n">illegal</span> <span class="n">option</span> <span class="o">--</span> <span class="o">-^</span><span class="err">@</span><span class="n">usage</span><span class="o">:</span> <span class="n">ctags</span> <span class="o">[-</span><span class="n">BFadtuwvx</span><span class="o">]</span> <span class="o">[-</span><span class="n">f</span> <span class="n">tagsfile</span><span class="o">]</span> <span class="n">file</span> <span class="o">...^</span><span class="err">@</span>
</pre></div>


<p>出了问题习惯性先看源码，跑到taglist.vim里边找了一圈，4k多行，没有线索，只能发大招Google-fu了，顺带吐槽gfw。</p>
<p>taglist faq原文如下：</p>
<div class="highlight"><pre><span class="n">Q</span><span class="o">:</span><span class="n">Are</span> <span class="n">you</span> <span class="n">using</span> <span class="n">exuberant</span> <span class="n">ctags</span> <span class="n">version</span> <span class="mf">5.0</span> <span class="n">and</span> <span class="n">above</span><span class="o">?</span>
<span class="n">A</span><span class="o">:</span><span class="n">The</span> <span class="n">taglist</span> <span class="n">plugin</span> <span class="n">relies</span> <span class="n">on</span> <span class="n">the</span> <span class="n">features</span> <span class="n">supported</span> <span class="n">by</span> <span class="n">exuberant</span> <span class="n">ctags</span> <span class="n">and</span> <span class="n">will</span> <span class="n">not</span> <span class="n">work</span> <span class="k">with</span> <span class="n">GNU</span> <span class="n">ctags</span> <span class="n">or</span> <span class="n">the</span> <span class="n">Unix</span> <span class="n">ctags</span> <span class="n">utility</span><span class="o">.</span> 
</pre></div>


<p>遂只能brew重新安装ctags，link ctags到/usr/local/bin/，该路径恰好在PATH变量中在/usr/bin前边，无缝替代ctags。若不想破坏emacs ctags，可在vimrc中另行此法：</p>
<div class="highlight"><pre><span class="n">let</span> <span class="n">Tlist_Ctags_Cmd</span> <span class="o">=</span> <span class="err">&#39;</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">ctags</span><span class="err">&#39;</span>
</pre></div>


<p>作为屌丝程序员为了跨平台，怎能就此作罢，不来两句if else怎么能行，参观学习<a href="http://stackoverflow.com/questions/2842078/how-do-i-detect-os-x-in-my-vimrc-file-so-certain-configurations-will-only-appl">detect osx in vimrc</a></p>
<div class="highlight"><pre><span class="k">if</span> <span class="n">has</span><span class="p">(</span><span class="s">&quot;unix&quot;</span><span class="p">)</span>
  <span class="n">let</span> <span class="n">s</span><span class="o">:</span><span class="n">uname</span> <span class="o">=</span> <span class="n">system</span><span class="p">(</span><span class="s">&quot;uname&quot;</span><span class="p">)</span>
  <span class="k">if</span> <span class="n">s</span><span class="o">:</span><span class="n">uname</span> <span class="o">==</span> <span class="s">&quot;Darwin</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="n">let</span> <span class="n">Tlist_Ctags_Cmd</span> <span class="o">=</span> <span class="err">&#39;</span><span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">ctags</span><span class="err">&#39;</span>
  <span class="n">endif</span>
<span class="n">endif</span>
</pre></div>


<p>has是指vim特性，可通过feature-list查看，手贱的同学可能去看了，我堂堂大vim怎么会没有多系统检测，其中明明有mac的嘛，可就是不行啊，还有macvim啊，也不行，虾米原因？
<strong>系统自带的vim只有unix特性，mac/macunix则没有</strong>，只有MacVim可用这两种特性（槽点：cmd这么不受待见啊）。参考<a href="http://stackoverflow.com/questions/6146633/vimscript-how-do-i-get-the-os-that-is-running-vim?rq=1">get os in vim</a></p>
<footer class="post-info">
    <abbr class="published" title="2014-05-13T00:00:00">
        Posted on 二 13 五月 2014 by Chong Yang |     tags: <a href="../tag/osx.html">OSX</a> <a href="../tag/vim.html">vim</a> <a href="../tag/plugin.html">plugin</a>     </abbr>
</footer><!-- /footer-post-info -->
                    </article>
<div class="paginationer">
    <p class="paginator">
        Page 1 / 1
    </p>
</div>
                </aside><!-- /aside-featured -->
                </ol><!-- /ol-posts-list -->
                </section><!-- /section-content -->
    <section id="extras">
    </section><!-- /sectin-extras -->

    <footer id="footer">
        <address id="about" class="vcard">
            &copy; 2014 <a class="url fn" href="..">onionisi</a>
        </address><!-- /address-about -->
    </footer><!-- /footer-footer -->

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//stats.g.doubleclick.net/dc.js','ga');

        ga('create', 'UA-54841037-1', '..');
        ga('send', 'pageview');
    </script>

</body>
</html>
